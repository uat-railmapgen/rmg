import{j as e,w as R,x as S,c as _,aa as M,a7 as b,E as g,d as h}from"./chakra-oLgDt0ZB.js";import{b as A,r as o,E as d,aY as y,b1 as k,b2 as L}from"./index-CTDscA0t.js";import{u as z,r as t}from"./react-Fl03amIb.js";import{g as x,P as O,c as w,u as D}from"./param-manager-utils-sep_DFhl.js";const V="rmg-bridge--",B={overflow:"hidden",flex:1,px:2,pb:2,"& > div":{m:0,h:"100%","& > div":{h:"100%"}}};function X(){const{t:s}=A(),[p]=z(),f=p.get("parentId"),i=p.get("parentComponent"),[v,u]=t.useState([]),[r,c]=t.useState(),[E,l]=t.useState(!1),n=t.useRef();t.useEffect(()=>(n.current=new BroadcastChannel(V+f),o.event(d.APP_CLIP_VIEW_OPENED,{parentComponent:i}),u(x()),()=>{var a;(a=n.current)==null||a.close()}),[]);const j=()=>{var P;if(!r)return;const{config:a,param:m}=w(r);try{(P=n.current)==null||P.postMessage({event:"IMPORT",meta:a,data:m&&D(m)}),o.event(d.APP_CLIP_VIEW_IMPORT,{parentComponent:i}),c(void 0),l(!1)}catch(N){l(!0)}},C=()=>{var a;(a=n.current)==null||a.postMessage({event:"CLOSE"}),o.event(d.APP_CLIP_VIEW_CLOSED,{parentComponent:i}),c(void 0),l(!1)},I=()=>{o.openApp("rmg")};return e.jsxs(y,{children:[E&&e.jsxs(R,{status:"error",variant:"solid",size:"xs",pl:3,pr:1,py:1,children:[e.jsx(S,{}),s("Project selected is invalid or corrupted.")]}),e.jsx(_.div,{sx:B,children:e.jsx(O,{paramRegistry:v,selectedParam:r,onParamSelect:c})}),e.jsx(M,{}),e.jsxs(b,{p:2,children:[e.jsx(g,{variant:"ghost",size:"sm","aria-label":s("Manage"),title:s("Manage"),icon:e.jsx(k,{}),onClick:I}),e.jsx(g,{variant:"ghost",size:"sm","aria-label":s("Reload"),title:s("Reload"),icon:e.jsx(L,{}),onClick:()=>u(x())}),e.jsx(h,{size:"sm",onClick:C,ml:"auto",children:s("Close")}),e.jsx(h,{size:"sm",colorScheme:"primary",isDisabled:!r,onClick:j,children:s("Import")})]})]})}export{X as default};
